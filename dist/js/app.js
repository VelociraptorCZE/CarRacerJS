!function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e,t,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e){return function(e){if(Array.isArray(e))return e}(e)||r(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}n.r(t);var i=function(t){var e=Object.keys(t),n=function(e){var t=e.alias,n=e.object;if(!(n instanceof Object))throw TypeError("Cannot register a non-object into DI!");if(Array.isArray(n)){var r=c(n),i=r[0],a=r.slice(1);this[t]=o(i,[this].concat(s(a)))}else this[t]=new n(this)}.bind(t),r=function(e){var t=this[e];"function"==typeof t.onInit&&t.onInit(this)}.bind(t);return e.forEach(function(e){n({object:t[e],alias:e})}),e.forEach(r),{container:t,registerObject:n}};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"onInit",value:function(e){var t=e.PlayerCarInfo,n=e.GameCanvas,r=e.PlayerPosition;this.playerCarInfo=t,this.gameCanvas=n,this.playerPosition=r,this.controls={"ArrowUp|KeyW":{x:0,y:-8},"ArrowDown|KeyS":{x:0,y:8},"ArrowLeft|KeyA":{x:-8,y:0},"ArrowRight|KeyD":{x:8,y:0}},this.initPlayer()}},{key:"initPlayer",value:function(){var n=this,r=this.playerCarInfo;this.gameCanvas.getCanvas().elem.addEventListener("touchmove",function(e){var t={false:(window.innerWidth/2-e.touches[0].clientX)/-20,true:0};r.coords.x+=t[r.isDestroyed]}),window.addEventListener("keypress",function(e){var t={false:n.move(e),true:{x:0,y:0}};try{r.coords.x+=t[r.isDestroyed].x,r.coords.y+=t[r.isDestroyed].y,n.playerPosition.checkPosition()}catch(e){}})}},{key:"move",value:function(e){var t=e.code,n=this.controls;return n[Object.keys(n).filter(function(e){return e.includes(t)})[0]]}}]),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxEnemies=5,this.spawnPoints=[[856,0],[688,0],[496,1],[304,1]],this.restartEnemies()}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(e,[{key:"restartEnemies",value:function(){this.enemyList=[]}},{key:"onInit",value:function(e){var t=e.PlayerCarInfo,n=e.Bounds,r=e.CanvasRender,i=e.Game;this.game=i,this.bounds=n,this.playerCarInfo=t,this.canvasRender=r}},{key:"setEnemies",value:function(){var e=this.enemyList,t=0;e.length<=this.maxEnemies&&2===this.getRandomNumber(0,20)&&this.generateEnemy();var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value.y;this.playerCarInfo.isDestroyed||this.moveTo(t,s),s>this.bounds.getBounds().y2&&e.splice(t,1),++t}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}this.canvasRender.redraw()}},{key:"generateEnemy",value:function(){var e=this.enemyList,t=this.playerCarInfo.carSize,n=this.getRandomNumber(-1,this.spawnPoints.length-1),r=-t.height-100,i=1===this.spawnPoints[n][1],a=!0,o=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var u=c.value;if(r+t.height+32>u.y)return}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}e.push({x:this.spawnPoints[n][0],y:r,speed:i?10:4,direction:i?"down":"up"})}},{key:"moveTo",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:1;this.enemyList[e].y=t+this.enemyList[e].speed*r}},{key:"checkCollisionWithPlayer",value:function(){var e=this.playerCarInfo,t=e.carSize,n=e.coords,r=this.enemyList,i=!0,a=!1,o=void 0;try{for(var s,c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value,u=this.isPlayerCollidingWithEnemy(l.x,n.x,t.width),f=this.isPlayerCollidingWithEnemy(l.y,n.y,t.height);u&&f&&this.game.restartGame()}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}},{key:"isPlayerCollidingWithEnemy",value:function(e,t,n){return e-n<=t&&t<=e+n}},{key:"getRandomNumber",value:function(e,t){return Math.ceil(e+Math.random()*(t-e))}}]),e}();function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(e,[{key:"onInit",value:function(e){var t=e.PlayerCarInfo;this.playerCarInfo=t,this.handleCanvasHeight(),addEventListener("resize",this.handleCanvasHeight.bind(this))}},{key:"handleCanvasHeight",value:function(e){if(!this.playerCarInfo.isDestroyed){var t=this.getCanvas(),n=t.elem,r=t.animElem,i=Math.ceil(n.clientHeight);(void 0===e||e instanceof Object)&&(e=i),r.innerHTML=r.innerHTML.replace(/[0-9]+px/,"".concat(e,"px"))}}},{key:"getCanvas",value:function(){var e=document.getElementById("js-game");return{elem:e,animElem:document.getElementById("js-anim"),width:parseInt(e.getAttribute("width")),height:parseInt(e.getAttribute("height")),context:e.getContext("2d")}}}]),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(e,[{key:"onInit",value:function(e){var t=e.PlayerCarInfo,n=e.GameCanvas,r=e.Enemies,i=e.CanvasRender;this.playerCarInfo=t,this.gameCanvas=n,this.enemies=r,this.canvasRender=i,this.initScore(),this.initGame()}},{key:"initGame",value:function(){var e=this;this.resetData(),setInterval(function(){e.playerCarInfo.isDestroyed?e.initScore():(e.score.number++,e.score.elem.innerHTML=e.score.elem.innerHTML.replace(/[0-9]+/,e.score.number))},100)}},{key:"initScore",value:function(){this.score={number:0,elem:document.getElementById("js-game-score")}}},{key:"restartGame",value:function(){var e=this,t=this.playerCarInfo;t.isDestroyed||(this.gameCanvas.handleCanvasHeight(0),t.isDestroyed=!0,setTimeout(function(){e.canvasRender.explosionCalled=!1,e.resetData(),e.enemies.restartEnemies(),e.gameCanvas.handleCanvasHeight()},2e3))}},{key:"resetData",value:function(){this.initScore(),this.playerCarInfo.resetProps()}}]),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.defaultProps=t,this.resetProps()}return function(e,t,n){t&&m(e.prototype,t),n&&m(e,n)}(n,[{key:"resetProps",value:function(){this.carProps=JSON.parse(JSON.stringify(this.defaultProps))}},{key:"isDestroyed",set:function(e){this.carProps.destroyed=!!e},get:function(){return this.carProps.destroyed}},{key:"coords",get:function(){return this.carProps.coords}},{key:"carSize",get:function(){return{width:this.carProps.width,height:this.carProps.height}}}]),n}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&g(e.prototype,t),n&&g(e,n)}(e,[{key:"onInit",value:function(e){var t=e.GameCanvas;this.gameCanvas=t}},{key:"getBounds",value:function(){var e=this.gameCanvas.getCanvas().elem;return{x1:.69*e.width,x2:.35*e.height,y1:-260,y2:e.height}}}]),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&x(e.prototype,t),n&&x(e,n)}(e,[{key:"onInit",value:function(e){var t=e.PlayerCarInfo,n=e.Bounds;this.playerCarInfo=t,this.bounds=n}},{key:"checkPosition",value:function(){var e=this.playerCarInfo,t=this.bounds.getBounds(),n=t.x1,r=t.x2;e.coords.x>n&&(e.coords.x=n),e.coords.x<r&&(e.coords.x=r)}},{key:"isPlayerOutsideRoad",value:function(){var e=this.bounds.getBounds(),t=e.y1,n=e.y2,r=this.playerCarInfo.coords.y;return r<t||n<r}}]),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(e,null,[{key:"getTextureFromFile",value:function(e){var t=new Image(0,0);return t.src=e,t}}]),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bounds=Object.freeze({min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER})}return function(e,t,n){t&&O(e.prototype,t),n&&O(e,n)}(e,[{key:"next",value:function(e,t){return Math.round(this.nextFloat(e,t))}},{key:"nextFloat",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:this.bounds.min,r=1<arguments.length&&void 0!==t?t:this.bounds.max;return Math.random()*(r-n)+n}},{key:"nextBool",value:function(){return!!this.next(0,1)}}]),e}();function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.random=new j}return function(e,t,n){t&&_(e.prototype,t),n&&_(e,n)}(e,[{key:"explosionEffect",value:function(e){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){I(t,e,n[e])})}return t}({},e,this),n=t.options,r=n.radiusIncrease,i=n.alphaDecrease,a=t.random,o=i||[.01,.05],s=r||[8,18],c=a.nextFloat.apply(a,E(o));return e.alpha>c&&(e.alpha-=c),e.radius+=a.next.apply(a,E(s)),e}},{key:"fireEffect",value:function(e){var t=this.random;e.y-=t.nextFloat(1,3),e.x+=t.nextFloat(-1.5,1.5);var n=t.nextFloat(.005,.01);return e.alpha>n&&(e.alpha-=n),e.radius-=t.nextFloat(.05,.075),e}},{key:"snowEffect",value:function(e){var t=this.random;return e.y+=t.nextFloat(2,7),e.x+=t.nextFloat(-1.5,1.5),e}},{key:"rainEffect",value:function(e){var t=this.random;return e.y+=t.nextFloat(6,12),e.x+=1.5,e}}]),e}();var T,R,A,F=(T=new Blob(['\n<svg width="10" height="10" version="1.1" viewBox="0 0 8.4667 8.4667" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n <metadata>\n  <rdf:RDF>\n   <cc:Work rdf:about="">\n    <dc:format>image/svg+xml</dc:format>\n    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>\n    <dc:title/>\n   </cc:Work>\n  </rdf:RDF>\n </metadata>\n <g transform="translate(0 -288.53)">\n  <g transform="matrix(1.3032 0 0 1.3032 -1.2694 -88.851)" fill="none" stroke="#ffffff">\n   <g stroke-width=".26458px">\n    <path d="m4.1459 289.94 0.17718 5.7287"/>\n    <path d="m1.9135 294.17 4.6893-2.8821"/>\n    <path d="m1.6773 291.4 5.0318 2.6458"/>\n    <path d="m4.8901 291.11-0.69689 0.64965-0.73233-0.54334"/>\n   </g>\n   <path d="m4.6767 290.56-0.52178 0.48641-0.54831-0.40681" stroke-width=".1981px"/>\n   <path d="m4.5287 290.13-0.38787 0.36158-0.4076-0.30241" stroke-width=".14726px"/>\n   <path d="m6.0258 292.51-0.92336-0.23477 0.060898-0.90985" stroke-width=".26458px"/>\n   <path d="m6.3695 292.03-0.69134-0.17577 0.045593-0.68123" stroke-width=".1981px"/>\n   <path d="m6.6504 291.68-0.51392-0.13067 0.033894-0.5064" stroke-width=".14726px"/>\n   <path d="m3.0434 291.32 0.23877 0.92233-0.82678 0.38467" stroke-width=".26458px"/>\n   <path d="m2.462 291.24 0.17878 0.69057-0.61903 0.28801" stroke-width=".1981px"/>\n   <path d="m2.0141 291.17 0.13289 0.51335-0.46017 0.21409" stroke-width=".14726px"/>\n   <path d="m2.4452 292.94 0.91642 0.26054-0.086348 0.90778" stroke-width=".26458px"/>\n   <path d="m2.0884 293.41 0.68615 0.19506-0.064648 0.67969" stroke-width=".1981px"/>\n   <path d="m1.7975 293.75 0.51006 0.14497-0.048069 0.50525" stroke-width=".14726px"/>\n   <path d="m3.5015 294.38 0.7023-0.64381 0.72776 0.54944" stroke-width=".26458px"/>\n   <path d="m3.7103 294.93 0.52583-0.48203 0.5449 0.41137" stroke-width=".1981px"/>\n   <path d="m3.8547 295.36 0.39088-0.35832 0.40506 0.3058" stroke-width=".14726px"/>\n   <path d="m5.3041 294.14-0.20568-0.93027 0.83999-0.35489" stroke-width=".26458px"/>\n   <path d="m5.8826 294.24-0.15401-0.69652 0.62891-0.26575" stroke-width=".1981px"/>\n   <path d="m6.3276 294.33-0.11448-0.51777 0.46751-0.19755" stroke-width=".14726px"/>\n  </g>\n </g>\n</svg>'],{type:"image/svg+xml"}),R=URL.createObjectURL(T),(A=new Image).src=R,A);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=Object.freeze({explosion:{particlesToCreate:3,defaultRadius:15,lifespan:500,blur:5},fire:{particlesToCreate:200,defaultRadius:10,lifespan:1500},snow:{particlesToCreate:2e3,image:F,lifespan:4e3,useFullCanvasWidth:!0},rain:{particlesToCreate:2e3,lifespan:2e3,defaultRadius:1,useFullCanvasWidth:!0}});function M(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){D(t,e,n[e])})}return t}({},L[e])}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=N(this,z(n).call(this)))._refreshTime=15,t.context=e,t.particles=[],t.options={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(n,S),function(e,t,n){t&&H(e.prototype,t),n&&H(e,n)}(n,[{key:"setOptions",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){W(t,e,n[e])})}return t}({},this.options,t)}},{key:"create",value:function(){this.adjustConfig(),this._renderCallbackIsCallable=!0,this._renderInitiated||(this._renderInitiated=!0,this._renderSequence())}},{key:"destroy",value:function(){var e=this.options,t=e.onDestroy,n=void 0===t?function(){}:t,r=e.callOnDestroyOnce;this.particlesToCreate=0,this._renderCallbackIsCallable=!1,this.particles=[],r&&this._onDestroyCalled||(n(),this._onDestroyCalled=!0)}},{key:"adjustConfig",value:function(){this.particleConfig=M(this.options.type)}},{key:"_renderSequence",value:function(){var e=this;return requestAnimationFrame(function(){e._render(),e._renderSequence()})}},{key:"_render",value:function(){var e=this.context,t=this.random,n=this._renderCallbackIsCallable,r=this.options,i=r.clearCanvasOnRender,a=r.onRender,o=void 0===a?function(){}:a;try{if(i){var s=e.canvas,c=s.width,l=s.height;e.clearRect(0,0,c,l)}n&&o(e),t.nextBool()&&this._createParticle(),this._renderAllParticles()}catch(e){n&&console.warn("Effect emitting was stopped because of ".concat(e,".")),this.destroy()}}},{key:"_setCanvasFillColor",value:function(e){this.context.fillStyle=e||this.options.color||"#000"}},{key:"_getParticleColor",value:function(){var e=this.random,t=this.options,n=t.color,r=t.colors,i=void 0===r?[]:r;Array.isArray(i)&&0<i.length&&(n=i[e.next(0,i.length-1)]);return n}},{key:"_createParticle",value:function(){var e=this.random,t=this.particles,n=this.particleConfig,r=this.context.canvas,i=this.options,a=i.radius,o=i.particleLifespan;if(0!==n.particlesToCreate){var s=n.useFullCanvasWidth?[0,r.width]:[-18,18];n.particlesToCreate--,t.push({lifespan:o||n.lifespan||500,radius:a||n.defaultRadius,alpha:.6,color:this._getParticleColor(),blur:n.blur,x:e.next.apply(e,s),y:e.next(-10,-15)})}else this.particles.length||this.destroy()}},{key:"_renderAllParticles",value:function(){var t=this,n=this.context,e=this.particles,r=this._refreshTime;this.particles=e.filter(function(e){return n.save(),(e=t._getParticle(e)).lifespan-=r,n.globalAlpha=e.alpha,t._renderParticle(e),n.restore(),0<e.lifespan})}},{key:"_renderParticle",value:function(e){var t=this.particleConfig,n=this.context,r=B(this.options.coords,2),i=r[0],a=r[1];this._setCanvasFillColor(e.color),t.image?n.drawImage(t.image,i+e.x,a+e.y):(n.filter="blur(".concat(e.blur,"px)"),n.beginPath(),n.arc(i+e.x,a+e.y,e.radius,0,2*Math.PI),n.fill(),n.closePath())}},{key:"_getParticle",value:function(e){try{return this["".concat(this.options.type,"Effect")](e)}catch(e){}return e}}]),n}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i({PlayerCarInfo:[b,{coords:{x:590,y:400},width:110,height:210,destroyed:!1}],GameCanvas:p,Bounds:w,PlayerPosition:C,Game:v,Player:u,Enemies:h,CanvasRender:function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enemyCarTexture={up:P.getTextureFromFile("tex/car_enemy_up.svg"),down:P.getTextureFromFile("tex/car_enemy_down.svg")},this.carTexture=P.getTextureFromFile("tex/car_player.svg")}return function(e,t,n){t&&U(e.prototype,t),n&&U(e,n)}(e,[{key:"onInit",value:function(e){var t=e.PlayerCarInfo,n=e.Enemies,r=e.GameCanvas;this.gameCanvas=r,this.enemies=n,this.playerCarInfo=t,this.explosion=new K(this.gameCanvas.getCanvas().context),this.explosion.setOptions({type:"explosion",colors:["#ff6e16","#ff6a09","#da5501"],clearCanvasOnRender:!0})}},{key:"redraw",value:function(){var t=this.enemyCarTexture,e=this.carTexture,n=this.explosion,r=this.enemies,i=this.playerCarInfo,a=i.coords,o=a.x,s=a.y,c=this.gameCanvas.getCanvas(),l=c.context,u=c.width,f=c.height;this.explosionCreated||l.clearRect(0,0,u,f),l.drawImage(e,o,s),r.enemyList.forEach(function(e){return l.drawImage(t[e.direction],e.x,e.y)}),i.isDestroyed&&!this.explosionCalled&&(this.gameCanvas.handleCanvasHeight(0),this.explosionCalled=!0,this.explosionCreated=!0,n.setOptions({coords:[o,s]}),n.create())}}]),e}(),Scene:function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&J(e.prototype,t),n&&J(e,n)}(e,[{key:"onInit",value:function(e){var t=e.Enemies,n=e.PlayerPosition,r=e.Game;this.enemies=t,this.playerPosition=n,this.game=r,this.renderScene()}},{key:"renderScene",value:function(){var e=this,t=this.enemies;requestAnimationFrame(function(){t.setEnemies(),t.checkCollisionWithPlayer(),e.renderScene(),e.playerPosition.isPlayerOutsideRoad()&&e.game.restartGame()})}}]),e}()})}]);