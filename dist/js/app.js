!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var h=function(){function r(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.checkCanvas(),window.addEventListener("resize",function(){e.checkCanvas()})}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(r,[{key:"checkCanvas",value:function(e){if(!car.destroyed){var t=Math.ceil(parseInt(window.getComputedStyle(r.get().elem).height.replace("px",""))),n=r.get().anim_elem;n.innerHTML=n.innerHTML.replace(/[0-9]+px/,"".concat(e||t,"px"))}}}],[{key:"get",value:function(){var e=document.getElementById("js-game");return{elem:e,anim_elem:document.getElementById("js-anim"),width:parseInt(e.getAttribute("width")),height:parseInt(e.getAttribute("height")),context:e.getContext("2d")}}}]),r}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,null,[{key:"get",value:function(){return{x1:.69*h.get().width,x2:.35*h.get().height,y1:-260,y2:h.get().height}}}]),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"check",value:function(){return car.coords.x>i.get().x1?car.coords.x=i.get().x1:car.coords.x<i.get().x2&&(car.coords.x=i.get().x2),car.coords.y<i.get().y1||car.coords.y>i.get().y2}}]),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matrix={"ArrowUp|KeyW":{x:0,y:-8},"ArrowDown|KeyS":{x:0,y:8},"ArrowLeft|KeyA":{x:-8,y:0},"ArrowRight|KeyD":{x:8,y:0}},this.initPlayer()}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(e,[{key:"initPlayer",value:function(){var n=this;h.get().elem.addEventListener("touchmove",function(e){var t={false:(window.innerWidth/2-e.touches[0].clientX)/-20,true:0};car.coords.x+=t[car.destroyed]}),window.addEventListener("keydown",function(e){var t={false:n.move(e),true:{x:0,y:0}};try{car.coords.x+=t[car.destroyed].x,car.coords.y+=t[car.destroyed].y,(new c).check()}catch(e){}})}},{key:"move",value:function(t){return this.matrix[Object.keys(this.matrix).filter(function(e){return e.includes(t.code)})[0]]}}]),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.initScore(),e?car.destroyed||((new h).checkCanvas("0"),car.destroyed=!0,setTimeout(function(){t.resetData(),(new h).checkCanvas()},2e3)):(this.resetData(),setInterval(function(){car.destroyed?t.initScore():(t.score.number+=1,t.score.elem.innerHTML=t.score.elem.innerHTML.replace(/[0-9]+/,t.score.number))},100))}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(n,[{key:"initScore",value:function(){this.score={number:0,elem:document.getElementById("js-game-score")}}},{key:"resetData",value:function(){window.car={coords:{x:590,y:400},destroyed:!1},this.initScore()}}]),n}();function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(e,null,[{key:"get",value:function(e){var t=new Image(0,0);return t.src=e,t}}]),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bounds=Object.freeze({min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER})}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(e,[{key:"next",value:function(e,t){return Math.round(this.nextFloat(e,t))}},{key:"nextFloat",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:this.bounds.min,r=1<arguments.length&&void 0!==t?t:this.bounds.max;return Math.random()*(r-n)+n}},{key:"nextBool",value:function(){return!!this.next(0,1)}}]),e}();function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.random=new b}return function(e,t,n){t&&g(e.prototype,t),n&&g(e,n)}(e,[{key:"explosionEffect",value:function(e){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){m(t,e,n[e])})}return t}({},e,this),n=t.options,r=n.radiusIncrease,o=n.alphaDecrease,i=t.random,a=o||[.01,.05],c=r||[8,18],u=i.nextFloat.apply(i,v(a));return e.alpha>u&&(e.alpha-=u),e.radius+=i.next.apply(i,v(c)),e}},{key:"fireEffect",value:function(e){var t=this.random,n=t.nextFloat(.005,.01);return e.y-=t.nextFloat(1,3),e.x+=t.nextFloat(-1.5,1.5),e.alpha>n&&(e.alpha-=n),e.radius-=t.nextFloat(.05,.075),e}}]),e}();function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=Object.freeze({explosion:{particlesToCreate:3,defaultRadius:15,lifespan:500,blur:5},fire:{particlesToCreate:200,defaultRadius:10,lifespan:1500}});function k(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){x(t,e,n[e])})}return t}({},O[e])}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=C(this,S(n).call(this)))._refreshTime=15,t.context=e,t.particles=[],t.options={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(n,w),function(e,t,n){t&&E(e.prototype,t),n&&E(e,n)}(n,[{key:"setOptions",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){P(t,e,n[e])})}return t}({},this.options,t)}},{key:"create",value:function(){this.particleConfig=k(this.options.type),this._renderCallbackIsCallable=!0,this._renderInitiated||(this._renderInitiated=!0,this._renderSequence())}},{key:"destroy",value:function(){var e=this.options,t=e.onDestroy,n=void 0===t?function(){}:t,r=e.callOnDestroyOnce;this.particlesToCreate=0,this._renderCallbackIsCallable=!1,this.particles=[],r&&this._onDestroyCalled||(n(),this._onDestroyCalled=!0)}},{key:"_renderSequence",value:function(){var e=this;return requestAnimationFrame(function(){e._render(),e._renderSequence()})}},{key:"_render",value:function(){var e=this.context,t=this.random,n=this._renderCallbackIsCallable,r=this.options,o=r.color,i=r.clearCanvasOnRender,a=r.onRender,c=void 0===a?function(){}:a;try{if(e.save(),e.fillStyle=o||"#000",i){var u=e.canvas,l=u.width,s=u.height;e.clearRect(0,0,l,s)}n&&c(e),t.nextBool()&&this._createParticle(),this._renderAllParticles(),e.restore()}catch(e){console.warn("Effect emitting was stopped because of ".concat(e,".")),this.destroy()}}},{key:"_createParticle",value:function(){var e=this.random,t=this.particles,n=this.particleConfig,r=this.options,o=r.radius,i=r.particleLifespan;0!==n.particlesToCreate?(n.particlesToCreate--,t.push({lifespan:i||n.lifespan||500,radius:o||n.defaultRadius,alpha:.6,blur:n.blur,x:e.next(-18,18),y:e.next(-10,-15)})):this.particles.length||this.destroy()}},{key:"_renderAllParticles",value:function(){var n=this,r=this.context,e=this.particles,o=this._refreshTime,t=_(this.options.coords,2),i=t[0],a=t[1];this.particles=e.filter(function(e){var t=r.filter;return e.lifespan-=o,(e=n._getParticle(e)).blur&&(r.filter="blur(".concat(e.blur,"px)")),r.globalAlpha=e.alpha,r.beginPath(),r.arc(i+e.x,a+e.y,e.radius,0,2*Math.PI),r.fill(),r.closePath(),r.filter=t,0<e.lifespan})}},{key:"_getParticle",value:function(e){try{return this["".concat(this.options.type,"Effect")](e)}catch(e){}return e}}]),n}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=h.get().context;this.car=p.get("tex/car_player.svg"),this.carEnemy={up:p.get("tex/car_enemy_up.svg"),down:p.get("tex/car_enemy_down.svg")},this.explosion=new A(e),this.explosion.setOptions({type:"explosion",color:"#ff6e16",clearCanvasOnRender:!0})}return function(e,t,n){t&&I(e.prototype,t),n&&I(e,n)}(t,[{key:"redraw",value:function(e,t){var n=this,r=this.carEnemy,o=this.car,i=this.explosion,a=window.car.coords,c=a.x,u=a.y,l=h.get(),s=l.context,f=l.width,y=l.height;this.explosionCreated||s.clearRect(0,0,f,y),s.drawImage(o,c,u),e.forEach(function(e){s.drawImage(r[e.direction],e.x,e.y)}),t&&!this.explosionCalled&&(this.explosionCalled=!0,this.explosionCreated=!0,i.setOptions({coords:[c,u]}),i.create(),setTimeout(function(){n.explosionCalled=!1},2e3))}}]),t}();function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&M(e.prototype,t),n&&M(e,n)}(e,[{key:"getCondition",value:function(e,t,n){return e-n<=t&&t<=e+n}},{key:"getRandomNumber",value:function(e,t){return Math.ceil(e+Math.random()*(t-e))}}]),e}();function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=L(this,q(n).call(this))).car={width:110,height:210},e.initNewGame(),e.maxNumberOfEnemies=t,e.spawnPoints=[[856,0],[688,0],[496,1],[304,1]],e.init(),e.canvasRender=new R,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(n,D),function(e,t,n){t&&F(e.prototype,t),n&&F(e,n)}(n,[{key:"initNewGame",value:function(){this.enemies=[],this.destroyed=!1}},{key:"init",value:function(){var e=this;requestAnimationFrame(function(){e.setEnemies(),e.checkCollision(),e.init()})}},{key:"setEnemies",value:function(){this.enemies.length<=this.maxNumberOfEnemies&&2===this.getRandomNumber(0,20)&&this.generateEnemy();for(var e=0;e<this.enemies.length;e++){var t=this.enemies[e].y;t>i.get().y2?this.enemies.splice(e,1):this.destroyed||this.moveTo(e,t)}this.canvasRender.redraw(this.enemies,this.destroyed)}},{key:"generateEnemy",value:function(){var t=this,e=this.getRandomNumber(-1,this.spawnPoints.length-1),n=-240,r=1===this.spawnPoints[e][1];this.enemies.forEach(function(e){return n+512>e.y?n-=2*t.car.height:null}),this.enemies.push({x:this.spawnPoints[e][0],y:n,speed:r?10:4,direction:r?"down":"up"})}},{key:"moveTo",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:1;this.enemies[e].y=t+this.enemies[e].speed*r}},{key:"checkCollision",value:function(){for(var e=this,t=0;t<this.enemies.length;t++){var n=this.enemies[t],r=this.getCondition(n.x,car.coords.x,this.car.width),o=this.getCondition(n.y,car.coords.y,this.car.height);(r&&o||(new c).check())&&(new f(!0),this.destroyed||(this.destroyed=!0,setTimeout(function(){e.initNewGame()},2e3)))}}}]),n}();new f,new h,new l,new G}]);